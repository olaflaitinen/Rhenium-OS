# Rhenium OS Pipeline Configuration
# Knee MRI Default Pipeline

name: mri_knee_default
version: "1.0.0"
description: "Standard knee MRI analysis pipeline"

pipeline_type: mri_knee

# Input configuration
input:
  modality: MR
  body_part: KNEE
  required_sequences:
    - PD_FS
    - T2
    - T1

# Reconstruction settings
reconstruction:
  enabled: false  # Assume DICOM input is already reconstructed
  method: rhenium_deep
  denoise: true

# Perception models
perception:
  meniscus:
    enabled: true
    model: meniscus_segmentation_v1
    threshold: 0.5
  cartilage:
    enabled: true
    model: cartilage_grading_v1
    grades: [0, 1, 2, 3, 4]
  ligaments:
    enabled: true
    model: ligament_detection_v1
    targets: [acl, pcl, mcl, lcl]

# XAI settings
xai:
  visual:
    enabled: true
    types: [segmentation_overlay, attention_map]
  quantitative:
    enabled: true
    measurements: [volume, max_diameter]
    radiomics: true
  narrative:
    enabled: true

# Disease Reasoning settings
disease_reasoning:
  enabled: true
  assessor: musculoskeletal
  generate_presence_assessment: true
  generate_hypotheses: true
  generate_differential: true
  max_differential_entries: 5
  detect_safety_flags: true
  include_staging: false  # Not applicable for most knee pathologies
  include_trajectory: true
  diseases:
    - meniscal_tear
    - cartilage_lesion
    - ligament_injury
    - bone_contusion
    - effusion

# MedGemma settings
medgemma:
  enabled: true
  template: mri_knee
  generate_report: true
  explain_findings: true
  explain_disease_hypotheses: true

# Output settings
output:
  format: json
  include_dossiers: true
  include_disease_output: true
  include_images: false
